<html>
    <head>
    <style>
    td{
       border:none; 
        padding:0px;
    }
    table{
        border:none;
    }
    img{
        margin:none;
        padding:0px;

    }
    tr{
        padding:0px;
    }

    </style>
    <script src="jquery-1.11.3.js"></script>
    <script src="rendergraphics.js"></script>
    
<script type="text/javascript">
   var lines = [];
    var ci=0;
    var cj=0;
    var p=0;
    $(document).ready(function() {
       
    $.ajax({
        type: "GET",
        url: "samplelvl_new.txt",
        dataType: "text",
        success: function(data) {processData(data);
                                }
     });
        
        document.onkeydown = makeMove;
});

  
function checkKey(e) {
    e = e || window.event;
    if (e.keyCode == '38') {
        alert("up arrow");  
    }
    else if (e.keyCode == '40') {
        alert("down arrow");
    }
    else if (e.keyCode == '37') {
       alert("left arrow");
    }
    else if (e.keyCode == '39') {
       alert("right arrow");
    }
}  
    
    
    
function processData(allText) {
    var allTextLines = allText.split(/\r\n|\n/);
    for (var i=0; i<allTextLines.length; i++) {
        var data = allTextLines[i].split(',');
           var tarr = [];
            for (var j=0; j<data.length; j++) {
                tarr.push(data[j]);
                var temp=data[j].split('/');
                if(temp[0]=="S")
                {
                    ci=i;
                    cj=j;
                    p=temp[1];
                }
            }
            lines.push(tarr);
    }
    start_game();
}
    
    
    
    
    
    
  function dis_check()
    {
        document.getElementById('d').innerHTML="";
        for(var i=0; i<lines.length; i++)
        {
            for(var j=0; j<lines[i].length; j++)
                document.getElementById('d').innerHTML+=lines[i][j]+"&#09";
            document.getElementById('d').innerHTML+="<br>";
        }
        document.getElementById('d').innerHTML+=ci+"<br>"+cj+"<br>"+p+"<br>";
    }
    
    
    
    
    
    
    function start_game()
    {
        //dis_check();
            rendergraphics_full(lines);
        
    }
    
    
    
    
    
    function makeMove(e)
    {
        e = e || window.event;
        var oldi=ci;
        var oldj=cj;
        if (e.keyCode == '38') {
        //alert("up arrow");
            
            
            if(ci-1<0 || (lines[ci-1][cj]!="R" && lines[ci-1][cj]!="T" && lines[ci-1][cj]!="S"))
            {
                alert("SORRY! You cannot go up from here!");
            }
            else
            {
                ci--;
                
                lines[oldi][oldj]="T";
                lines[ci][cj]="S";
            }
            
            //dis_check();
        
    }
    else if (e.keyCode == '40') {
        //alert("down arrow");
        
        if(ci+1>=lines.length || (lines[ci+1][cj]!="R" && lines[ci+1][cj]!="T" && lines[ci+1][cj]!="S"))
            {
                alert("SORRY! You cannot go down from here!");
            }
        else
            {
                ci++;
                
                lines[oldi][oldj]="T";
                lines[ci][cj]="S";
            }
        //dis_check();
    }
    else if (e.keyCode == '37') {
       //alert("left arrow");
        
        if((cj-1)<0 || (lines[ci][cj-1]!="R" && lines[ci][cj-1]!="T" && lines[ci][cj-1]!="S"))
            {
                alert("SORRY! You cannot go left from here!");
            }
        else
            {
                cj--;
                
                lines[oldi][oldj]="T";
                lines[ci][cj]="S";
            }
        //dis_check();
    }
    else if (e.keyCode == '39') {
       //alert("right arrow");
        
        if(cj+1>=lines.length || (lines[ci][cj+1]!="R" && lines[ci][cj+1]!="T" && lines[ci][cj+1]!="S"))
            {
                alert("SORRY! You cannot go right from here!");
            }
        else
            {
                cj++;
                
                lines[oldi][oldj]="T";
                lines[ci][cj]="S";
            }
        //dis_check();
        
    }
    //alert("sir");
    rendergraphics_partial(lines, ci, cj, oldi, oldj);
}
    
    
    
  

  
    
    
</script>
    </head>
<body>
    
    
    
  <p id="d"></p>
</body>
</html>